<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deksmo PDF Manager</title>
    <link rel="icon" type="image/png" href="../img/logo-wink.png">
    <link rel="stylesheet" href="../css/pdf_manager.css">
</head>
<body class="bg-dark">

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="brand">
                <img src="../img/logo-open.png" alt="Deksmo" class="brand-logo-img">
                <div class="brand-text">
                    <h1>Deksmo</h1>
                    <span>WebGrab</span>
                </div>
            </div>
            
            <div class="header-actions">
                <button id="btn-export-all" class="btn btn-primary btn-hidden">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                    Export All
                </button>
                <button id="btn-add-folders" class="btn btn-secondary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>
                    Add Folders
                </button>
                <input type="file" id="file-input" webkitdirectory directory multiple hidden>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        
        <!-- Empty State -->
        <div id="empty-state" class="empty-state">
            <div class="empty-icon-wrapper">
                <div class="empty-bg-glow"></div>
                <svg class="empty-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>
            </div>
            <h2>Drop your folders here</h2>
            <p>Select your parent folder. We'll sort everything numerically and prep them for PDF export.</p>
            <button id="btn-import-big" class="btn btn-white">Import Folders</button>
        </div>

        <!-- Content View -->
        <div id="content-view" class="content-view hidden">
            <div class="content-header">
                <div class="content-stats">
                    <span class="pulse-dot"></span>
                    <span id="chapter-count">0 CHAPTERS QUEUED</span>
                </div>
                <button id="btn-clear-all" class="btn-text">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                    CLEAR ALL
                </button>
            </div>

            <div id="chapter-list" class="chapter-list">
                <!-- Chapters will be injected here -->
            </div>
        </div>

    </main>

    <!-- Templates -->
    <template id="tpl-chapter-card">
        <div class="chapter-card">
            <div class="card-header">
                <div class="card-info">
                    <span class="badge-ready">READY</span>
                    <h3 class="chapter-title">Chapter Title</h3>
                    <p class="chapter-details">Contains <span class="page-count">0</span> pages. Ready for export.</p>
                    <div class="card-actions">
                        <button class="btn-mini btn-pdf">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            PDF
                        </button>
                        <button class="btn-mini btn-zip">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                            ZIP
                        </button>
                        <button class="btn-mini btn-delete-red">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </div>
                </div>
                <div class="card-preview">
                    <!-- Preview image BG -->
                    <div class="preview-overlay">
                        <span class="preview-author">DeksmoWebGrab</span>
                    </div>
                </div>
            </div>
            
            <!-- Expanded Grid (Hidden by default) -->
            <div class="card-grid hidden">
                <div class="grid-inner">
                    <div class="grid-header">
                        <h4>PAGE INSPECTION</h4>
                        <span>Showing all pages</span>
                    </div>
                    <div class="image-grid">
                        <!-- Images -->
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Progress Overlay -->
    <div id="progress-overlay" class="overlay hidden">
        <div class="overlay-content">
            <div class="spinner-wrapper">
                <div class="spinner-ring"></div>
                <div class="spinner-text"><span id="progress-percent">0</span>%</div>
            </div>
            <h3>PROCESSING</h3>
            <p id="progress-message">Analyzing files...</p>
        </div>
    </div>

    <!-- Lightbox Overlay -->
    <div id="lightbox-overlay" class="overlay hidden lightbox-overlay">
        <div class="lightbox-content">
            <button id="lightbox-close" class="lightbox-close-btn">×</button>
            <div class="lightbox-main">
                <button id="lightbox-prev" class="lightbox-nav-btn prev">‹</button>
                <div class="lightbox-image-wrapper">
                    <img id="lightbox-image" src="" alt="Full view">
                </div>
                <button id="lightbox-next" class="lightbox-nav-btn next">›</button>
            </div>
            <div class="lightbox-info">
                <span id="lightbox-filename">filename.jpg</span>
                <span id="lightbox-counter">1 / 10</span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../../lib/jspdf.umd.min.js"></script>
    <script src="../../lib/jszip.min.js"></script>
    <script src="../init/exportHelpers.js"></script>
    <script src="../init/pdf_manager.js"></script>
</body>
</html>
